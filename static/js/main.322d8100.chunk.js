(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[0],{11:function(e,t,a){e.exports={nav:"NavBar_nav__3ocuz",item:"NavBar_item__1oVAR",activeLink:"NavBar_activeLink__2Y0oH",frStyle:"NavBar_frStyle__1h7Cs"}},128:function(e,t,a){e.exports={column:"News_column__3vg-L"}},129:function(e,t,a){e.exports={playlist:"Music_playlist__3Juat"}},130:function(e,t,a){e.exports={params:"Settings_params__26hRP"}},132:function(e,t,a){e.exports=a.p+"static/media/user.a7a21bf1.jpg"},133:function(e,t,a){e.exports=a.p+"static/media/preloader.f481902e.svg"},14:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(123);const r=a.n(n).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"74435572-4a35-461a-9d76-044724160d14"}}),s={getUsers:(e=1,t=10)=>r.get("users?page=".concat(e,"&count=").concat(t)).then(e=>e.data),follow:e=>r.post("follow/".concat(e)),unfollow:e=>r.delete("follow/".concat(e)),getProfile:e=>(console.warn("Obsolete method. Please profileAPI object."),o.getProfile(e))},o={getProfile:e=>r.get("profile/"+e),getStatus:e=>r.get("profile/status/"+e),updateStatus:e=>r.put("profile/status/",{status:e})},l={me:()=>r.get("auth/me"),login:(e,t,a=!1)=>r.post("auth/login",{email:e,password:t,rememberMe:a}),logout:()=>r.delete("auth/login")}},160:function(e,t,a){e.exports=a(288)},243:function(e,t,a){},244:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(6),r=a(88),s=a(97);let o={};var l=(e=o,t)=>e,c=a(7),i=a.n(c),u=a(16),m=a(8),p=a(14);const d=(e,t,a,n)=>e.map(e=>e[a]===t?Object(m.a)({},e,{},n):e);let g={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]};const f=e=>({type:"FOLLOW",userId:e}),E=e=>({type:"UNFOLLOW",userId:e}),h=e=>({type:"SET_CURRENT_PAGE",currentPage:e}),b=e=>({type:"TOGGLE_IS_FETCHING",isFetching:e}),v=(e,t)=>({type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}),w=function(){var e=Object(u.a)(i.a.mark((function e(t,a,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0,a)),e.next=3,n(a);case 3:0==e.sent.data.resultCode&&t(r(a)),t(v(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();var _=(e=g,t)=>{switch(t.type){case"FOLLOW":return Object(m.a)({},e,{users:d(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(m.a)({},e,{users:d(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(m.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(m.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(m.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(m.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(m.a)({},e,{followingInProgress:t.isFetching?[...e.followingInProgress,t.userId]:e.followingInProgress.filter(e=>e!=t.userId)});default:return e}},S=a(37);let O={userId:null,email:null,login:null,isAuth:!1};const P=(e,t,a,n)=>({type:"samurai-network/auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}),C=()=>function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.me();case 2:0===(a=e.sent).data.resultCode&&(n=a.data.data,r=n.id,s=n.email,o=n.login,t(P(r,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var y=(e=O,t)=>{switch(t.type){case"samurai-network/auth/SET_USER_DATA":return Object(m.a)({},e,{},t.payload);default:return e}},N=a(124),j=a(122);let k={initialized:!1};var I=(e=k,t)=>{switch(t.type){case"INITIALIZED_SUCCESS":return Object(m.a)({},e,{initialized:!0});default:return e}};let T=Object(n.c)({profilePage:r.b,dialogsPage:s.a,sidebar:l,usersPage:_,auth:y,form:j.a,app:I});const x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.d,L=Object(n.e)(T,x(Object(n.a)(N.a)));window.__store__=L;var U=L,A=a(0),z=a.n(A),F=a(54),R=a.n(F),D=(a(243),a(244),a(11)),G=a.n(D),M=a(10);var B=()=>z.a.createElement("nav",{className:G.a.nav},z.a.createElement("div",{className:G.a.item},z.a.createElement(M.b,{to:"/profile",activeClassName:G.a.activeLink},"Profile")),z.a.createElement("div",{className:G.a.item},z.a.createElement(M.b,{to:"/dialogs",activeClassName:G.a.activeLink},"Messages")),z.a.createElement("div",{className:G.a.item},z.a.createElement(M.b,{to:"/news",activeClassName:G.a.activeLink},"News")),z.a.createElement("div",{className:G.a.item},z.a.createElement(M.b,{to:"/music",activeClassName:G.a.activeLink},"Music")),z.a.createElement("div",{className:G.a.item},z.a.createElement(M.b,{to:"/settings",activeClassName:G.a.activeLink},"Settings")),z.a.createElement("div",{className:"".concat(G.a.item," ").concat(G.a.frStyle)},z.a.createElement(M.b,{to:"/users",activeClassName:G.a.activeLink},"Users"))),W=a(25),H=a(128),J=a.n(H);var V=()=>z.a.createElement("div",{className:J.a.column},z.a.createElement("p",null,"News")),X=a(129),Y=a.n(X);var Z=()=>z.a.createElement("div",{className:Y.a.playlist},z.a.createElement("p",null,"Music")),q=a(130),K=a.n(q);var $=()=>z.a.createElement("div",{className:K.a.params},z.a.createElement("p",null,"Settings")),Q=a(46),ee=a(121),te=a(60),ae=a.n(te),ne=a(131),re=a.n(ne);var se=({totalItemsCount:e,pageSize:t,currentPage:a,onPageChanged:n,portionSize:r=10})=>{let s=Math.ceil(e/t),o=[];for(let g=1;g<=s;g++)o.push(g);let l=Math.ceil(s/r),c=Object(A.useState)(1),i=Object(ee.a)(c,2),u=i[0],m=i[1],p=(u-1)*r+1,d=u*r;return z.a.createElement("div",{className:ae.a.paginator},u>1&&z.a.createElement("button",{onClick:()=>{m(u-1)}},"PREV"),o.filter(e=>e>=p&&e<=d).map(e=>z.a.createElement("span",{className:re()({[ae.a.selectedPage]:a===e},ae.a.pageNumber),key:e,onClick:t=>{n(e)}},e)),l>u&&z.a.createElement("button",{onClick:()=>{m(u+1)}},"NEXT"))},oe=a(83),le=a.n(oe),ce=a(132),ie=a.n(ce);var ue=({user:e,followingInProgress:t,unfollow:a,follow:n})=>z.a.createElement("div",{className:le.a.friends},z.a.createElement("span",null,z.a.createElement("div",null,z.a.createElement(M.b,{to:"/profile/"+e.id},z.a.createElement("img",{src:null!=e.photos.small?e.photos.small:ie.a,className:le.a.usersPhoto}))),z.a.createElement("div",null,e.followed?z.a.createElement("button",{disabled:t.some(t=>t===e.id),onClick:()=>{a(e.id)}},"Unfollow"):z.a.createElement("button",{disabled:t.some(t=>t===e.id),onClick:()=>{n(e.id)}},"Follow"))),z.a.createElement("span",null,z.a.createElement("span",null,z.a.createElement("div",null," ",e.name," "),z.a.createElement("div",null," ",e.status," ")),z.a.createElement("span",null,z.a.createElement("div",null," ","user.location.country"," "),z.a.createElement("div",null," ","user.location.city"," "))));var me=e=>{let t=e.currentPage,a=e.totalUsersCount,n=e.pageSize,r=e.onPageChanged,s=e.users,o=Object(Q.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users"]);return z.a.createElement("div",null,z.a.createElement(se,{currentPage:t,onPageChanged:r,totalItemsCount:a,pageSize:n}),z.a.createElement("div",null,s.map(e=>z.a.createElement(ue,{user:e,followingInProgress:o.followingInProgress,key:e.id,unfollow:o.unfollow,follow:o.follow}))))},pe=a(12),de=a(33),ge=a(134);const fe=Object(ge.a)(e=>e.usersPage.users,e=>e.filter(e=>!0)),Ee=e=>e.usersPage.pageSize,he=e=>e.usersPage.totalUsersCount,be=e=>e.usersPage.currentPage,ve=e=>e.usersPage.isFetching,we=e=>e.usersPage.followingInProgress;class _e extends z.a.Component{constructor(...e){super(...e),this.onPageChanged=e=>{const t=this.props.pageSize;this.props.getUsers(e,t)}}componentDidMount(){const e=this.props,t=e.currentPage,a=e.pageSize;this.props.getUsers(t,a)}render(){return z.a.createElement(z.a.Fragment,null,this.props.isFetching?z.a.createElement(de.a,null):null,z.a.createElement(me,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}var Se=Object(n.d)(Object(pe.b)(e=>({users:fe(e),pageSize:Ee(e),totalUsersCount:he(e),currentPage:be(e),isFetching:ve(e),followingInProgress:we(e)}),{follow:e=>function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(a,e,p.c.follow.bind(p.c),f);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),unfollow:e=>function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(a,e,p.c.unfollow.bind(p.c),E);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),setCurrentPage:h,toggleFollowingProgress:v,getUsers:(e,t)=>function(){var a=Object(u.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(b(!0)),n(h(e)),a.next=4,p.c.getUsers(e,t);case 4:r=a.sent,n(b(!1)),n({type:"SET_USERS",users:r.items}),n({type:"SET_TOTAL_USERS_COUNT",count:r.totalCount});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}))(_e),Oe=a(84),Pe=a.n(Oe);var Ce=e=>z.a.createElement("header",{className:Pe.a.header},z.a.createElement("img",{src:"https://www.freelogodesign.org/Content/img/logo-ex-7.png"}),z.a.createElement("div",{className:Pe.a.loginBlock},e.isAuth?z.a.createElement("div",null,e.login," - ",z.a.createElement("button",{onClick:e.logout},"Log out")," "):z.a.createElement(M.b,{to:"/login"},"Login")));class ye extends z.a.Component{render(){return z.a.createElement(Ce,this.props)}}var Ne=Object(pe.b)(e=>({isAuth:e.auth.isAuth,login:e.auth.login}),{logout:()=>function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.logout();case 2:0===(a=e.sent).data.resultCode&&t(C()),0===a.data.resultCode&&window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})(ye),je=a(120),ke=a(30),Ie=a(76),Te=a(45),xe=a.n(Te);const Le=Object(je.a)({form:"login"})(({handleSubmit:e,error:t})=>z.a.createElement("form",{onSubmit:e},Object(ke.c)("Email","email",[Ie.b],ke.a),Object(ke.c)("Password","password",[Ie.b],ke.a,{type:"password"}),Object(ke.c)(null,"rememberMe",[],ke.a,{type:"checkbox"},"remember me"),t&&z.a.createElement("div",{className:xe.a.formSummaryError},t),z.a.createElement("div",null,z.a.createElement("button",null,"Login"))));var Ue=Object(pe.b)(e=>({isAuth:e.auth.isAuth}),{login:(e,t,a)=>function(){var n=Object(u.a)(i.a.mark((function n(r){var s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.login(e,t,a);case 2:0===(s=n.sent).data.resultCode?r(C()):(o=s.data.messages.length>0?s.data.messages[0]:"Some error",r(Object(S.a)("login",{_error:o})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})(e=>e.isAuth?z.a.createElement(W.a,{to:"/profile"}):z.a.createElement("div",null,z.a.createElement("h1",null,"Login"),z.a.createElement(Le,{onSubmit:t=>{e.login(t.email,t.password,t.rememberMe)}})));const Ae=e=>t=>z.a.createElement(A.Suspense,{fallback:z.a.createElement(de.a,null)},z.a.createElement(e,t)),ze=z.a.lazy(()=>a.e(4).then(a.bind(null,294))),Fe=z.a.lazy(()=>a.e(3).then(a.bind(null,293)));class Re extends A.Component{componentDidMount(){this.props.initializeApp()}render(){return this.props.initialized?z.a.createElement("div",{className:"app-wrapper"},z.a.createElement(Ne,null),z.a.createElement(B,null),z.a.createElement("div",{className:"app-wrapper-content"},z.a.createElement(W.b,{path:"/profile/:userId?",render:Ae(Fe)}),z.a.createElement(W.b,{path:"/dialogs",render:Ae(ze)}),z.a.createElement(W.b,{path:"/news",render:()=>z.a.createElement(V,null)}),z.a.createElement(W.b,{path:"/music",render:()=>z.a.createElement(Z,null)}),z.a.createElement(W.b,{path:"/settings",render:()=>z.a.createElement($,null)}),z.a.createElement(W.b,{path:"/users",render:()=>z.a.createElement(Se,null)}),z.a.createElement(W.b,{path:"/login",render:()=>z.a.createElement(Ue,null)}))):z.a.createElement(de.a,null)}}let De=Object(n.d)(W.f,Object(pe.b)(e=>({initialized:e.app.initialized}),{initializeApp:()=>e=>{let t=e(C());Promise.all([t]).then(()=>{e({type:"INITIALIZED_SUCCESS"})})}}))(Re);var Ge=e=>z.a.createElement(M.a,null,z.a.createElement(pe.a,{store:U},z.a.createElement(De,null)));R.a.render(z.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},30:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p}));var n=a(46),r=a(0),s=a.n(r),o=a(45),l=a.n(o),c=a(79);const i=({input:e,meta:{touched:t,error:a},children:n})=>{const r=t&&a;return s.a.createElement("div",{className:l.a.formControl+" "+(r?l.a.error:"")},s.a.createElement("div",null,n),r&&s.a.createElement("span",null," ",a," "))},u=e=>{const t=e.input,a=(e.meta,e.child,Object(n.a)(e,["input","meta","child"]));return s.a.createElement(i,e,s.a.createElement("textarea",Object.assign({},t,a)))},m=e=>{const t=e.input,a=(e.meta,e.child,Object(n.a)(e,["input","meta","child"]));return s.a.createElement(i,e,s.a.createElement("input",Object.assign({},t,a)))},p=(e,t,a,n,r={},o="")=>s.a.createElement("div",null,s.a.createElement(c.a,Object.assign({placeholder:e,name:t,validate:a,component:n},r))," ",o)},33:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(133),o=a.n(s);t.a=e=>r.a.createElement("div",{style:{}},r.a.createElement("img",{src:o.a}))},45:function(e,t,a){e.exports={formControl:"FormsControls_formControl__2CyPl",error:"FormsControls_error__2jkR9",formSummaryError:"FormsControls_formSummaryError__2J01z"}},60:function(e,t,a){e.exports={paginator:"Paginator_paginator__3HPd3",pageNumber:"Paginator_pageNumber__I_red",selectedPage:"Paginator_selectedPage__282uw"}},76:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));const n=e=>{if(!e)return"Field is required"},r=e=>t=>{if(t.length>e)return"Max length is ".concat(e," symbols")}},83:function(e,t,a){e.exports={friends:"Users_friends__2uVsD",usersPhoto:"Users_usersPhoto__2J9N1"}},84:function(e,t,a){e.exports={header:"Header_header__3Wd6r",loginBlock:"Header_loginBlock__3-jD0"}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return d}));var n=a(7),r=a.n(n),s=a(16),o=a(8),l=a(14);let c={posts:[{id:1,message:"Hi, how arre yoy?",likesCount:12},{id:2,message:"It's my first post",likesCount:13},{id:3,message:"Azaza",likesCount:8},{id:4,message:"lol kek lul",likesCount:12}],profile:null,status:""};const i=e=>({type:"ADD-POST",newPostText:e}),u=e=>({type:"SET_STATUS",status:e}),m=e=>function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c.getProfile(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=e=>function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.getStatus(e);case 2:n=t.sent,a(u(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=e=>function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(u(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t.b=(e=c,t)=>{switch(t.type){case"ADD-POST":{let a={id:5,message:t.newPostText,likesCount:0};return Object(o.a)({},e,{posts:[...e.posts,a],newPostText:""})}case"SET_STATUS":return Object(o.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(o.a)({},e,{profile:t.profile});case"DELETE_POST":return Object(o.a)({},e,{posts:e.posts.filter(e=>e.id!=t.postId)});default:return e}}},97:function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(8);let r={dialogs:[{id:1,name:"Anton"},{id:2,name:"Dima"},{id:3,name:"Alex"},{id:4,name:"Lexa"},{id:5,name:"Sveta"},{id:6,name:"Lera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your"},{id:3,message:"Yo"},{id:4,message:"thanks"},{id:5,message:"What?"}]};const s=e=>({type:"SEND_MESSAGE",newMessageBody:e});t.a=(e=r,t)=>{switch(t.type){case"SEND_MESSAGE":let a=t.newMessageBody;return Object(n.a)({},e,{messages:[...e.messages,{id:6,message:a}]});default:return e}}}},[[160,1,2]]]);
//# sourceMappingURL=main.322d8100.chunk.js.map